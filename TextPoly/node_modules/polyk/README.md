# PolyK

This library was written by [Ivan Kuckir](http://www.ivank.net).

## What is PolyK?

PolyK is JavaScript tool for working with polygons. It uses several basic principles to be super simple and super universal:

-   **No classes.** PolyK does not have any classes or special data structures. PolyK consists of static functions only.
-   **What is polygon?** For PolyK, polygon is an array of numbers. Each two of them are X and Y coordinate of polygon vertex.
-   **Simplicity and speed.** Since PolyK does not make you use any special data structures, it is very easy to implement into your project. Since all JS engines are optimised for work with arrays, PolyK runs very fast.

PolyK was used in the game [Tiny Monsters](http://tinymonsters.ivank.net/). Do you like the project? [Make a donation](https://www.paypal.com/au/cgi-bin/webscr?cmd=_flow&SESSION=lVWmm5XwRF3D6AwScgjgqh6znJQXHcjKbhJQlW5pIizCZK6Pc8EtJVNwR_a&dispatch=50a222a57771920b6a3d7b606239e4d529b525e0b7e69bf0224adecfb0124e9b61f737ba21b081984719ecfa9a8ffe80733a1a700ced90ae)!

## Install

**npm**

```bash
$ npm install --save deep-slice
```

**bower**

```bash
$ bower install polyk
```

**web browser [ES5](http://kangax.github.io/compat-table/es5/)**

```html
<script src="https://unpkg.com/polyk/dist/polyk.min.js"></script>
```

## Resources

-   [Homepage](http://polyk.ivank.net/)
-   [Demos](http://polyk.ivank.net/?p=demos)
    -   [Point Intersection](http://polyk.ivank.net/?p=demos&d=intersect)
    -   [Triangulation](http://polyk.ivank.net/?p=demos&d=triangulate)
    -   [Slicing](http://polyk.ivank.net/?p=demos&d=slice)
    -   [Ray Casting](http://polyk.ivank.net/?p=demos&d=raycast)
    -   [Closest Edge](http://polyk.ivank.net/?p=demos&d=closestedge)
-   [Documentation](http://polyk.ivank.net/?p=documentation)
-   [Discussion](http://polyk.ivank.net/?p=discussion)

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### IsSimple

Checks, if polygon is simple. Polygon is simple, when its edges don't cross each other.

**Parameters**

-   `polygon` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)>** [x1, y1, x2, y2...]

Returns **[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** true if Polygon is simple

### IsConvex

Checks, if polygon is convex. Polygon is convex, when each inner angle is &lt;= 180Â°.

**Parameters**

-   `polygon` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)>** [x1, y1, x2, y2...]

Returns **[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** 

### GetArea

Returns the area of polygon.

**Parameters**

-   `polygon` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)>** [x1, y1, x2, y2...]

Returns **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** 

### GetAABB

Returns the Axis-aligned Bounding Box of polygon

**Parameters**

-   `polygon` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)>** [x1, y1, x2, y2...]

**Examples**

```javascript
//={x:0, y:0, width:0, height:0}
```

Returns **AABB** 

### Triangulate

Computes the triangulation. Output array is array of triangles (triangle = 3 indices of polygon vertices).

Works with simple polygons only.

**Parameters**

-   `polygon` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)>** [x1, y1, x2, y2...]

**Examples**

```javascript
var ids = PolyK.Triangulate([0, 0, 1, 0, 1, 1, 0, 1]);
//=[0, 1, 2, 0, 2, 3]
```

Returns **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)>** array of triangles (triangle = 3 indices of polygon vertices)

### Slice

Slices the polygon with line segment A-B, defined by [ax,ay] and [bx,by]. A, B must not lay inside a polygon. Returns an array of polygons.

Works with simple polygons only.

**Parameters**

-   `polygon` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)>** [x1, y1, x2, y2...]
-   `startX` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** Start Coordinate [x]
-   `startY` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** Start Coordinate [y]
-   `endX` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** End Coordinate [x]
-   `endY` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** End Coordinate [y]

### ContainsPoint

Checks, if polygon contains [x, y].

Works with simple polygons only.

**Parameters**

-   `polygon` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)>** [x1, y1, x2, y2...]
-   `pointX` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** Coordinate [x]
-   `pointY` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** Coordinate [y]

Returns **[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** depth

### Raycast

Finds the closest point of polygon, which lays on ray defined by [x,y](origin) and [dx,dy](direction).

"dist" is the distance of the polygon point, "edge" is the number of the edge, on which intersection occurs, "norm" is the normal in that place, "refl" is reflected direction.

Works with simple polygons only.

**Parameters**

-   `polygon` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)>** [x1, y1, x2, y2...]
-   `originX` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** Origin [x]
-   `originY` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** Origin [y]
-   `directionX` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** Direction [x]
-   `directionY` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** Direction [y]
-   `isc`  

**Examples**

```javascript
//={dist:0, edge:0, norm:{x:0, y:0}, refl:{x:0, y:0}}
```

Returns **[Raycast](#raycast)** 

### ClosestEdge

Finds the point on polygon edges, which is closest to [x,y]. Returns an object in this format

"dist" is the distance of the polygon point, "edge" is the number of the closest edge, "point" is the closest point on that edge, "norm" is the normal from "point" to [x,y].

**Parameters**

-   `polygon` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)>** [x1, y1, x2, y2...]
-   `x` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** Coordinate [x]
-   `y` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** Coordinate [y]
-   `isc`  

**Examples**

```javascript
//={dist:0, edge:0, point:{x:0, y:0}, norm:{x:0, y:0}}
```

Returns **[ClosestEdge](#closestedge)** 

### Reverse

Reverse

**Parameters**

-   `polygon` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)>** [x1, y1, x2, y2...]
