/**
 * Created by meredith on 8/14/17.
 */

const font = "din-condensed-bold";
const font_for_map = './DIN-Condensed-Bold.ttf';
const phinney = [
    [
        [250.89612881715993, 282.0590479892853],
        [250.89612881715993, 283.3176339966594],
        [250.89612881715993, 284.57621219710563],
        [250.89612881715993, 298.420057193056],
        [231.67007789059141, 299.67854172259104],
        [213.92295395835902, 298.420057193056],
        [213.92295395835902, 309.74613698959],
        [212.4440269640229, 309.74613698959],
        [210.96509996962027, 309.74613698959],
        [209.48617297528426, 309.74613698959],
        [209.48617297528426, 308.4877148964151],
        [208.00724598094814, 308.4877148964151],
        [206.52831898661213, 307.2292849991354],
        [205.0493919922095, 305.97084729769267],
        [203.57046499794, 304.7124017919705],
        [200.61261100920137, 300.93701844714815],
        [200.61261100920137, 299.67854172259104],
        [199.13368401486525, 298.420057193056],
        [197.65475702052925, 295.90306471838267],
        [197.65475702052925, 293.38604102187674],
        [196.1758300261265, 292.1275174651528],
        [196.1758300261265, 256.8856882020191],
        [182.86548707696886, 256.8856882020191],
        [182.86548707696886, 227.9324624898727],
        [239.0647128623383, 227.9324624898727],
        [239.0647128623383, 234.22699351268238],
        [239.0647128623383, 235.48587628017412],
        [239.0647128623383, 236.744751235703],
        [239.0647128623383, 238.00361837938544],
        [237.58578586800218, 238.00361837938544],
        [237.58578586800218, 239.26247771130875],
        [237.58578586800218, 240.52132923161844],
        [236.10685887359955, 245.55665719951503],
        [236.10685887359955, 248.07427431744873],
        [236.10685887359955, 249.33307116036303],
        [236.10685887359955, 250.59186019279878],
        [236.10685887359955, 251.85064141484327],
        [234.62793187926354, 253.10941482667113],
        [234.62793187926354, 254.36818042839877],
        [233.14900488492742, 254.36818042839877],
        [233.14900488492742, 256.8856882020191],
        [233.14900488492742, 258.1444303742901],
        [234.62793187926354, 259.40316473698476],
        [234.62793187926354, 260.6618912903068],
        [236.10685887359955, 261.92061003428535],
        [236.10685887359955, 263.1793209691241],
        [237.58578586800218, 264.4380240949977],
        [239.0647128623383, 265.6967194120225],
        [240.5436398566743, 266.9554069203441],
        [240.5436398566743, 269.4727585113433],
        [240.5436398566743, 270.7314225943119],
        [242.02256685107704, 273.2487273357983],
        [242.02256685107704, 274.5073679946363],
        [242.02256685107704, 275.76600084573147],
        [243.50149384541305, 275.76600084573147],
        [243.50149384541305, 277.02462588905473],
        [244.98042083974906, 278.28324312501354],
        [249.4172018228238, 279.5418525536079],
        [250.89612881715993, 279.5418525536079],
        [250.89612881715993, 280.8004541749833],
        [250.89612881715993, 282.0590479892853]]];
const phinney_grid_1 = [[
    [203.25,
        268.5],
    [200,
        268.5],
    [200,
        257],
    [199,
        254],
    [196,
        253],
    [187,
        253],
    [187,
        232],
    [203.25,
        232]]];
const phinney_grid_2 = [[
    [219.5, 268.5], [203.25, 268.5], [203.25, 232], [219.5, 232]]];
const phinney_grid_3 = [[
    [219.5,
        232],
    [235,
        232],
    [235,
        235],
    [234,
        238],
    [234,
        239],
    [232,
        244],
    [232,
        251],
    [231,
        251],
    [231,
        251],
    [229,
        254],
    [229,
        258],
    [231,
        261],
    [232,
        264],
    [235,
        267],
    [235.75,
        268.5],
    [219.5,
        268.5]]];

const grid =
    [[[314.85185185185173,
        191.0000000000001],
        [304,
            191],
        [304,
            191],
        [314.8518518518518,
            179.37301587301596]]];

const grid_2 = [[[314.8518518518518,
    179.37301587301596],
    [318,
        176],
    [319,
        173],
    [319,
        172],
    [325,
        172],
    [325.7037037037037,
        191],
    [314.85185185185173,
        191.0000000000001]]];

const grid_3 =
    [316,
        210,
        288.375,
        210,
        288,
        207,
        288,
        207,
        288,
        202,
        287,
        196,
        287,
        192,
        301,
        192,
        304,
        191,
        316,
        191.0000000000001];
const grid_4 =
    [316,
        191.0000000000001,
        325.7037037037037,
        191,
        326,
        199,
        327,
        202,
        330,
        203,
        345,
        204,
        343,
        208,
        343,
        210,
        316,
        210];

const maple_slices =
    [
        [
            [304,
                191,
                304,
                191,
                318,
                176,
                319,
                173,
                319,
                172,
                325,
                172,
                325.7037037037037,
                191]
        ],
        [
            [288.375,
                210,
                288,
                207,
                288,
                207,
                288,
                202,
                287,
                196,
                287,
                192,
                301,
                192,
                304,
                191,
                325.7037037037037,
                191,
                326,
                199,
                327,
                202,
                330,
                203,
                345,
                204,
                343,
                208,
                343,
                210]],
        []];

const maple_outline = [
    [
        [288, 207],
        [288, 202],
        [287, 196],
        [287, 192],
        [301, 192],
        [304, 191],
        [318, 176],
        [319, 173],
        [319, 172],
        [325, 172],
        [326, 199],
        [327, 202],
        [330, 203],
        [345, 204],
        [343, 208],
        [343, 211],
        [342, 213],
        [342, 218],
        [343, 226],
        [343, 229],
        [342, 229],
        [342, 230],
        [339, 233],
        [338, 235],
        [335, 237],
        [321, 252],
        [319, 254],
        [319, 255],
        [316, 262],
        [315, 263],
        [313, 264],
        [311, 266],
        [309, 267],
        [309, 266],
        [308, 265],
        [308, 264],
        [307, 262],
        [306, 261],
        [304, 258],
        [299, 253],
        [296, 249],
        [294, 247],
        [293, 245],
        [292, 244],
        [292, 243],
        [289, 237],
        [289, 215],
        [288, 207]]];

const mapleTop =
    [
        [325.7037037037037,
            191,
            326,
            199,
            327,
            202,
            330,
            203,
            345,
            204,
            343,
            208,
            343,
            211,
            342,
            213,
            342,
            218,
            343,
            226,
            343,
            229,
            342,
            229,
            342,
            230,
            339,
            233,
            338,
            235,
            335,
            237,
            321,
            252,
            319,
            254,
            319,
            255,
            316,
            262,
            315,
            263,
            313,
            264,
            311,
            266,
            309,
            267,
            309,
            266,
            308,
            265,
            308,
            264,
            307,
            262,
            306,
            261,
            304,
            258,
            299,
            253,
            296,
            249,
            294,
            247,
            293,
            245,
            292,
            244,
            292,
            243,
            289,
            237,
            289,
            215,
            288,
            207,
            288,
            207,
            288,
            202,
            287,
            196,
            287,
            192,
            301,
            192,
            304,
            191],
        [304,
            191,
            304,
            191,
            318,
            176,
            319,
            173,
            319,
            172,
            325,
            172,
            325.7037037037037,
            191]];

const mapleTop2 = [ [ 343,
    210,
    343,
    211,
    342,
    213,
    342,
    218,
    343,
    226,
    343,
    229,
    342,
    229,
    342,
    230,
    339,
    233,
    338,
    235,
    335,
    237,
    321,
    252,
    319,
    254,
    319,
    255,
    316,
    262,
    315,
    263,
    313,
    264,
    311,
    266,
    309,
    267,
    309,
    266,
    308,
    265,
    308,
    264,
    307,
    262,
    306,
    261,
    304,
    258,
    299,
    253,
    296,
    249,
    294,
    247,
    293,
    245,
    292,
    244,
    292,
    243,
    289,
    237,
    289,
    215,
    288.375,
    210 ],
    [ 288.375,
        210,
        288,
        207,
        288,
        207,
        288,
        202,
        287,
        196,
        287,
        192,
        301,
        192,
        304,
        191,
        325.7037037037037,
        191,
        326,
        199,
        327,
        202,
        330,
        203,
        345,
        204,
        343,
        208,
        343,
        210 ] ];

const maple3 = [ [ 343,
    210,
    343,
    211,
    342,
    213,
    342,
    218,
    343,
    226,
    343,
    229,
    342,
    229,
    342,
    230,
    339,
    233,
    338,
    235,
    335,
    237,
    321,
    252,
    319,
    254,
    319,
    255,
    316,
    262,
    315,
    263,
    313,
    264,
    311,
    266,
    309,
    267,
    309,
    266,
    308,
    265,
    308,
    264,
    307,
    262,
    306,
    261,
    304,
    258,
    299,
    253,
    296,
    249,
    294,
    247,
    293,
    245,
    292,
    244,
    292,
    243,
    289,
    237,
    289,
    215,
    288.375,
    210 ],
    [ 288.375,
        210,
        288,
        207,
        288,
        207,
        288,
        202,
        287,
        196,
        287,
        192,
        301,
        192,
        304,
        191,
        325.7037037037037,
        191,
        326,
        199,
        327,
        202,
        330,
        203,
        345,
        204,
        343,
        208,
        343,
        210 ] ];
const sandpoint_string = "M449.106880844726,235.0633370920841L475.1481533551889,242.69805625616573L475.3105519136635,242.68434954085387L475.4432132902692,242.67875559348613L475.5418023847002,242.68184617199586L476.15813050337954,242.7204745374911L476.2125026059922,242.72482452591066L476.36480586594837,242.74711145460606L476.5158036544026,242.78414429712575L476.6648484370064,242.83576851617545L476.8113004805725,242.9017677603406L476.8364139010464,242.9146670481423L477.4345382356877,243.22758752468508L477.552657389615,243.29477264665184L477.6920567671881,243.38859844164108L477.82702742410436,243.49577157571912L477.9569920404349,243.61582844314398L478.0813914998205,243.74825521442108L478.19969269169076,243.89248397524352L478.31139371144275,244.04789658865775L478.41601085857246,244.21383242221782L478.46840915091525,244.30575323553057L478.6801139588101,244.69049589443603L479.55474597238594,245.0190517597366L481.05640992958513,245.505143323011L481.1637836499276,245.5438677263155L481.2709987371337,245.59065068952623L483.6523163517428,246.7221847110195L485.807756212306,247.74392236227868L488.3094918588107,248.7986573491944L488.4227141948254,248.8510371959419L488.5351043577648,248.91252236484434L492.6666429983237,251.3529577134468L492.97064879336847,251.51003341173055L493.50056875012706,251.77860047016293L495.14858853094836,252.31188592675608L495.25611308260454,252.35065924120136L495.4025625256513,252.41665150606423L495.54396171882024,252.49560423204093L495.8586271297154,252.6887520297605L495.8604631113345,252.68988003476989L495.8674949731727,252.69422980817035L496.8192928273147,253.2852765865391L496.9516603431821,253.37475183416973L497.08663100009835,253.4819196568278L497.14202251463564,253.53094905201579L497.7427473898066,254.0794926029339L497.8173178911467,254.15051393173053L497.94171735053226,254.28293377970112L498.0600211428556,254.4271549997793L498.0735335517967,254.44489388613147L498.549432478967,255.07456152624218L498.6476210897779,255.21222669782583L498.75223823703993,255.37815333754406L498.8493268191645,255.55388407490682L498.9384707499447,255.73867333089584L499.01928774979297,255.93172917159973L499.09142934613817,256.1322210357175L499.1324892813882,256.2626424294431L499.2036218680846,256.50136566595756L499.43897859273136,256.6531837315997L499.5417987662969,256.72395692416467L499.67676942321316,256.83112296578474L499.8067314390245,256.95117188754375L499.8253617118098,256.9698531112226L500.16083404792425,257.309796224552L500.2666032344582,257.4235289535718L500.3849070268478,257.56774792575743L500.49660544608037,257.7231538546621L500.51300705551546,257.7477568851318L501.28796554942085,258.9220855126041L501.3761836877011,259.06340236761025L501.473272269958,259.23912989132805L501.5624162007382,259.42391576751834L501.5853295638393,259.4758602073125L501.8095247682312,259.9940793317219L502.2308227452328,260.32741180993617L502.30071487400664,260.3850074156653L502.43067688981785,260.5050542203535L502.46257251995587,260.5372822381614L502.86825685130543,260.9544690803159L502.9607606804868,261.0546565268596L503.07906447287644,261.1988729003933L503.1907628921091,261.3542760287237L503.29538263975815,261.52019374797237L503.39247122201505,261.69592299178476L503.4816151527291,261.88070661519305L503.56242955199184,262.0737565710442L503.5910406995838,262.14953797642374L504.2437789869907,263.9303078154626L504.2873120364617,264.0550071981561L504.3504739661571,264.262069344637L504.40438317248675,264.4748289162235L504.43626840061336,264.62553235021187L504.6651159721796,265.7998208956269L504.67765317835585,265.8666508416936L504.7124068026893,266.0880381576135L504.7373355848332,266.3123261705914L504.75208585097903,266.53296362026595L504.79889558157026,267.5681822381157L504.79914523328114,267.5737754943839L504.8041538745847,267.80097436122014L504.8029056149717,267.9143998749496L504.7560984850983,270.0427542247344L504.7523355028884,270.1565299819631L504.74520742110633,270.2827705896052L504.6749928252194,271.3025192459463L504.66712098888024,271.40250455148635L504.64218960634935,271.62678664940177L504.61190631118086,271.82302555505885L504.13600738407683,274.5423230531742L504.1315422559504,274.5674647958658L504.0871146204764,274.7849915328261L504.03780837105614,274.98111148466705L503.933786747623,275.359646323137L503.93104837837654,275.3695654712792L503.8764370260642,275.5665578004264L503.87457243846745,275.5732632613217L503.8114105087059,275.7803135722934L503.7392689123608,275.9807856887055L503.6584519125124,276.1738221371197L503.61012346631014,276.2771500191884L503.2928549142998,276.9299248426978L503.252042030506,277.01136318195495L503.1549534482491,277.1870789168461L503.0503363009209,277.35298360022716L502.9386352811689,277.50837427112856L502.8949097918098,277.5639332627761L502.4710216764223,278.08923999176477L502.39644597404356,278.1778853673022L502.2720465145918,278.3102894265321L502.1830534151253,278.39435759646585L501.4981568428758,279.0096088426071L499.99862792933754,280.58534366608365L499.7146619000823,281.07765688135987L499.51959535080266,282.46093238686444L499.4895747102728,282.64788312034216L499.44514967545035,282.8654011352919L499.39124046905454,283.0781372038182L499.3280785394254,283.2851836665359L499.25593434242853,283.4856483172043L499.17511994323195,283.6786737141665L499.08597601245174,283.8634371806693L499.06083658665204,283.9112270680489L498.78778242580825,284.4210714222572L498.7158306688317,284.5489909715834L498.6112135216358,284.71488959415L498.49951510240317,284.87027072597994L498.38121131001367,285.0144700561941L498.25681185069425,285.14686962382984L498.1268472343636,285.26690167791094L498.115045981054,285.27695552268415L497.6949676576878,285.6323468348128L497.5118505922476,285.8662729470525L496.9758583732995,286.8221826380177L496.937060908416,286.88960428067367L496.8324437610878,287.05550097636296L496.8150617479155,287.0810467072588L496.4379833629207,287.6295027991L496.4324338092903,287.63754423568025L496.1642166539506,288.0250816223852L495.52185972437485,289.58256599502056L495.25972003239576,290.4122880740906L495.24003133956467,290.47306534743984L495.1678871427001,290.67352284817025L495.08707014285176,290.86654136065044L494.997926212204,291.05130209960043L494.90088964079735,291.2269167602062L494.7526588273687,291.47796562564326L494.75260681651844,291.4780505959934L494.64798966932256,291.6439473767241L494.53628864957057,291.799323165993L494.4179874577004,291.94351753845694L494.3620446286925,292.00532557829865L494.35797738320366,292.1340784274216L494.342974864629,292.36027631312027L494.31804608261757,292.58453508728417L494.28329245815166,292.8058930526022L494.23886742332934,293.02340010364424L494.19338396846115,293.2055054961529L493.6524715267278,295.19841907938826L493.64404837571965,295.2290348673705L493.5808864460904,295.4360688466404L493.5421591956266,295.54757473780774L492.4422163457241,298.5789425082621L492.2801584581964,299.7336685016926L492.2496697204108,299.9239169167122L492.20524468545614,300.14141242334154L492.1513354792588,300.3541302556405L492.1345333865346,300.412846022984L491.957696626685,301.01533531208406L491.91133678964775,301.16364781573066L491.83919259271704,301.36409468305646L491.7583781934543,301.5571029568091L491.68097570350915,301.718928520655L491.4495301919328,302.1746548107476L491.43778615064446,302.19757627128274L491.34069756838755,302.37327004701365L491.23608042125784,302.5391578593408L491.12437940150585,302.69452524915687L491.0060782096357,302.83871182618896L490.95529225259327,302.89497831783956L490.5105998123736,303.3738743090653L490.4369863100966,303.44999549450586L490.30702169376593,303.57001664774725L490.17205103684967,303.67715777945705L490.0326516594089,303.7709554643079L489.88941908500783,303.8510157914134L489.74593945921674,303.9158055439184L489.1264724880018,304.1636099338066L486.4839747807315,303.1218129529152L478.9840079305301,299.5228424599918L476.88551210726393,302.6931310406944L469.88899951236453,302.5371225453855L469.79956952213934,294.04906264701276L456.8767760058985,294.27657540515065L455.9788145428163,294.35662019299343L455.58683506042814,264.52654414830613L455.5057424032784,263.52476968523115L455.2579394914269,262.66537071517087L454.65177688588415,261.5606572237157L454.1283738837642,260.6604269806994L453.74271371502186,260.0466378238925L453.4672384507412,259.4737665147113L453.2193107131004,258.73721032909816L452.91628532185916,257.46869058691664L452.20005223536793,254.07230355089996L450.6427315084735,247.65713335116743L450.2441830605304,246.2972227773862L449.8585202911363,245.43784690622124L449.0871869508561,243.84186059588683L448.3709564649505,242.49140463021467L446.4211829571751,239.13293830651673L448.2830139840379,238.9415198598581L448.02605716928394,238.28785702274763L448.39866782530225,238.39709973832942Z";


var test = phinney;
var testb = phinney_grid_3;
var test_string = sandpoint_string;

// const TextToSVG = require('text-to-svg');
const TextPoly = require('../TextPoly/bundle.js');

// test_2d_1d(mapleTop);
// test_2d_1d(mapleTop2);
//test_2d_1d(maple3);
function test_path_string(path_string) {
    append_path(path_string);
}

test_path_string(test_string);

// TextPoly.execute(test, "testtesttest", 0, font, textToSVG, svg);


function test_3d_2d(array) {
    for (var i = 0; i < array.length; i++) {
        append_path(path_from_2d(array[i]));
    }
}

function test_3d_1d(array) {
    for (var i = 0; i < array.length; i++) {
        for (var j = 0; j < array[i].length; j++) {
            append_path(path_from_1d(array[i][j]));
        }
    }
}

function test_2d_1d(array) {
    for (var i = 0; i < array.length; i++) {
        append_path(path_from_1d(array[i]));
    }
}

function test_1d(testb) {
    append_path(path_from_1d(testb));
}

function append_path(path) {
    d3.select("#map")
        .attr("height", 1000)
        .attr("width", "100%")
        .append("path")
        .attr("fill", "white")
        .attr("stroke", "black")
        .attr("d", path);
}

/* generates path for this kind of 2d array:
 [
     [288, 207],
     [288, 202],
     [287, 196],
     ...,
 ]
 */
function path_from_2d(array) {
    // append coords to SVG path
    if (array[0]) {
        var path_b = "M" + array[0][0] + "," + array[0][1];
        for (var k = 0; k < array.length; k++) {
            path_b += "L" + array[k][0] + "," + array[k][1];
        }
        path_b += "Z";
        return path_b;
    }
}

function path_from_1d(array) {
    var path_b = "M" + array[0] + "," + array[1];
    for (var i = 2; i < array.length; i += 2) {
        // append coords to SVG path
        path_b += "L" + array[i] + "," + array[i + 1];
    }
    path_b += "Z";
    return path_b;
}
