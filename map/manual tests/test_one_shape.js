/**
 * Created by meredith on 8/14/17.
 */

const font = "din-condensed-bold";
const font_for_map = './DIN-Condensed-Bold.ttf';
const phinney = [
    [
        [250.89612881715993, 282.0590479892853],
        [250.89612881715993, 283.3176339966594],
        [250.89612881715993, 284.57621219710563],
        [250.89612881715993, 298.420057193056],
        [231.67007789059141, 299.67854172259104],
        [213.92295395835902, 298.420057193056],
        [213.92295395835902, 309.74613698959],
        [212.4440269640229, 309.74613698959],
        [210.96509996962027, 309.74613698959],
        [209.48617297528426, 309.74613698959],
        [209.48617297528426, 308.4877148964151],
        [208.00724598094814, 308.4877148964151],
        [206.52831898661213, 307.2292849991354],
        [205.0493919922095, 305.97084729769267],
        [203.57046499794, 304.7124017919705],
        [200.61261100920137, 300.93701844714815],
        [200.61261100920137, 299.67854172259104],
        [199.13368401486525, 298.420057193056],
        [197.65475702052925, 295.90306471838267],
        [197.65475702052925, 293.38604102187674],
        [196.1758300261265, 292.1275174651528],
        [196.1758300261265, 256.8856882020191],
        [182.86548707696886, 256.8856882020191],
        [182.86548707696886, 227.9324624898727],
        [239.0647128623383, 227.9324624898727],
        [239.0647128623383, 234.22699351268238],
        [239.0647128623383, 235.48587628017412],
        [239.0647128623383, 236.744751235703],
        [239.0647128623383, 238.00361837938544],
        [237.58578586800218, 238.00361837938544],
        [237.58578586800218, 239.26247771130875],
        [237.58578586800218, 240.52132923161844],
        [236.10685887359955, 245.55665719951503],
        [236.10685887359955, 248.07427431744873],
        [236.10685887359955, 249.33307116036303],
        [236.10685887359955, 250.59186019279878],
        [236.10685887359955, 251.85064141484327],
        [234.62793187926354, 253.10941482667113],
        [234.62793187926354, 254.36818042839877],
        [233.14900488492742, 254.36818042839877],
        [233.14900488492742, 256.8856882020191],
        [233.14900488492742, 258.1444303742901],
        [234.62793187926354, 259.40316473698476],
        [234.62793187926354, 260.6618912903068],
        [236.10685887359955, 261.92061003428535],
        [236.10685887359955, 263.1793209691241],
        [237.58578586800218, 264.4380240949977],
        [239.0647128623383, 265.6967194120225],
        [240.5436398566743, 266.9554069203441],
        [240.5436398566743, 269.4727585113433],
        [240.5436398566743, 270.7314225943119],
        [242.02256685107704, 273.2487273357983],
        [242.02256685107704, 274.5073679946363],
        [242.02256685107704, 275.76600084573147],
        [243.50149384541305, 275.76600084573147],
        [243.50149384541305, 277.02462588905473],
        [244.98042083974906, 278.28324312501354],
        [249.4172018228238, 279.5418525536079],
        [250.89612881715993, 279.5418525536079],
        [250.89612881715993, 280.8004541749833],
        [250.89612881715993, 282.0590479892853]]];
const phinney_grid_1 = [[
    [203.25,
        268.5],
    [200,
        268.5],
    [200,
        257],
    [199,
        254],
    [196,
        253],
    [187,
        253],
    [187,
        232],
    [203.25,
        232]]];
const phinney_grid_2 = [[
    [219.5, 268.5], [203.25, 268.5], [203.25, 232], [219.5, 232]]];
const phinney_grid_3 = [[
    [219.5,
        232],
    [235,
        232],
    [235,
        235],
    [234,
        238],
    [234,
        239],
    [232,
        244],
    [232,
        251],
    [231,
        251],
    [231,
        251],
    [229,
        254],
    [229,
        258],
    [231,
        261],
    [232,
        264],
    [235,
        267],
    [235.75,
        268.5],
    [219.5,
        268.5]]];

const grid =
    [[[314.85185185185173,
        191.0000000000001],
        [304,
            191],
        [304,
            191],
        [314.8518518518518,
            179.37301587301596]]];

const grid_2 = [[[314.8518518518518,
    179.37301587301596],
    [318,
        176],
    [319,
        173],
    [319,
        172],
    [325,
        172],
    [325.7037037037037,
        191],
    [314.85185185185173,
        191.0000000000001]]];

const grid_3 =
    [316,
        210,
        288.375,
        210,
        288,
        207,
        288,
        207,
        288,
        202,
        287,
        196,
        287,
        192,
        301,
        192,
        304,
        191,
        316,
        191.0000000000001];
const grid_4 =
    [316,
        191.0000000000001,
        325.7037037037037,
        191,
        326,
        199,
        327,
        202,
        330,
        203,
        345,
        204,
        343,
        208,
        343,
        210,
        316,
        210];

const maple_slices =
    [
        [
            [304,
                191,
                304,
                191,
                318,
                176,
                319,
                173,
                319,
                172,
                325,
                172,
                325.7037037037037,
                191]
        ],
        [
            [288.375,
                210,
                288,
                207,
                288,
                207,
                288,
                202,
                287,
                196,
                287,
                192,
                301,
                192,
                304,
                191,
                325.7037037037037,
                191,
                326,
                199,
                327,
                202,
                330,
                203,
                345,
                204,
                343,
                208,
                343,
                210]],
        []];

const maple_outline = [
    [
        [288, 207],
        [288, 202],
        [287, 196],
        [287, 192],
        [301, 192],
        [304, 191],
        [318, 176],
        [319, 173],
        [319, 172],
        [325, 172],
        [326, 199],
        [327, 202],
        [330, 203],
        [345, 204],
        [343, 208],
        [343, 211],
        [342, 213],
        [342, 218],
        [343, 226],
        [343, 229],
        [342, 229],
        [342, 230],
        [339, 233],
        [338, 235],
        [335, 237],
        [321, 252],
        [319, 254],
        [319, 255],
        [316, 262],
        [315, 263],
        [313, 264],
        [311, 266],
        [309, 267],
        [309, 266],
        [308, 265],
        [308, 264],
        [307, 262],
        [306, 261],
        [304, 258],
        [299, 253],
        [296, 249],
        [294, 247],
        [293, 245],
        [292, 244],
        [292, 243],
        [289, 237],
        [289, 215],
        [288, 207]]];

const mapleTop =
    [
        [325.7037037037037,
            191,
            326,
            199,
            327,
            202,
            330,
            203,
            345,
            204,
            343,
            208,
            343,
            211,
            342,
            213,
            342,
            218,
            343,
            226,
            343,
            229,
            342,
            229,
            342,
            230,
            339,
            233,
            338,
            235,
            335,
            237,
            321,
            252,
            319,
            254,
            319,
            255,
            316,
            262,
            315,
            263,
            313,
            264,
            311,
            266,
            309,
            267,
            309,
            266,
            308,
            265,
            308,
            264,
            307,
            262,
            306,
            261,
            304,
            258,
            299,
            253,
            296,
            249,
            294,
            247,
            293,
            245,
            292,
            244,
            292,
            243,
            289,
            237,
            289,
            215,
            288,
            207,
            288,
            207,
            288,
            202,
            287,
            196,
            287,
            192,
            301,
            192,
            304,
            191],
        [304,
            191,
            304,
            191,
            318,
            176,
            319,
            173,
            319,
            172,
            325,
            172,
            325.7037037037037,
            191]];

const mapleTop2 = [ [ 343,
    210,
    343,
    211,
    342,
    213,
    342,
    218,
    343,
    226,
    343,
    229,
    342,
    229,
    342,
    230,
    339,
    233,
    338,
    235,
    335,
    237,
    321,
    252,
    319,
    254,
    319,
    255,
    316,
    262,
    315,
    263,
    313,
    264,
    311,
    266,
    309,
    267,
    309,
    266,
    308,
    265,
    308,
    264,
    307,
    262,
    306,
    261,
    304,
    258,
    299,
    253,
    296,
    249,
    294,
    247,
    293,
    245,
    292,
    244,
    292,
    243,
    289,
    237,
    289,
    215,
    288.375,
    210 ],
    [ 288.375,
        210,
        288,
        207,
        288,
        207,
        288,
        202,
        287,
        196,
        287,
        192,
        301,
        192,
        304,
        191,
        325.7037037037037,
        191,
        326,
        199,
        327,
        202,
        330,
        203,
        345,
        204,
        343,
        208,
        343,
        210 ] ];

const maple3 = [ [ 343,
    210,
    343,
    211,
    342,
    213,
    342,
    218,
    343,
    226,
    343,
    229,
    342,
    229,
    342,
    230,
    339,
    233,
    338,
    235,
    335,
    237,
    321,
    252,
    319,
    254,
    319,
    255,
    316,
    262,
    315,
    263,
    313,
    264,
    311,
    266,
    309,
    267,
    309,
    266,
    308,
    265,
    308,
    264,
    307,
    262,
    306,
    261,
    304,
    258,
    299,
    253,
    296,
    249,
    294,
    247,
    293,
    245,
    292,
    244,
    292,
    243,
    289,
    237,
    289,
    215,
    288.375,
    210 ],
    [ 288.375,
        210,
        288,
        207,
        288,
        207,
        288,
        202,
        287,
        196,
        287,
        192,
        301,
        192,
        304,
        191,
        325.7037037037037,
        191,
        326,
        199,
        327,
        202,
        330,
        203,
        345,
        204,
        343,
        208,
        343,
        210 ] ];

var test = phinney;
var testb = phinney_grid_3;

const TextToSVG = require('text-to-svg');
const TextPoly = require('../../TextPoly/bundle.js');

test_2d_1d(mapleTop);
test_2d_1d(mapleTop2);
//test_2d_1d(maple3);

//TextPoly.execute(test, "testtesttest", 0, font, textToSVG, svg);

function test_3d_2d(array) {
    for (var i = 0; i < array.length; i++) {
        append_path(path_from_2d(array[i]));
    }
}

function test_3d_1d(array) {
    for (var i = 0; i < array.length; i++) {
        for (var j = 0; j < array[i].length; j++) {
            append_path(path_from_1d(array[i][j]));
        }
    }
}

function test_2d_1d(array) {
    for (var i = 0; i < array.length; i++) {
        append_path(path_from_1d(array[i]));
    }
}

function test_1d(testb) {
    append_path(path_from_1d(testb));
}

function append_path(path) {
    d3.select("#map")
        .attr("height", 1000)
        .attr("width", "100%")
        .append("path")
        .attr("fill", "white")
        .attr("stroke", "black")
        .attr("d", path);
}

/* generates path for this kind of 2d array:
 [
     [288, 207],
     [288, 202],
     [287, 196],
     ...,
 ]
 */
function path_from_2d(array) {
    // append coords to SVG path
    if (array[0]) {
        var path_b = "M" + array[0][0] + "," + array[0][1];
        for (var k = 0; k < array.length; k++) {
            path_b += "L" + array[k][0] + "," + array[k][1];
        }
        path_b += "Z";
        return path_b;
    }
}

function path_from_1d(array) {
    var path_b = "M" + array[0] + "," + array[1];
    for (var i = 2; i < array.length; i += 2) {
        // append coords to SVG path
        path_b += "L" + array[i] + "," + array[i + 1];
    }
    path_b += "Z";
    return path_b;
}
