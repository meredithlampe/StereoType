!function(r,n){"object"==typeof exports&&"undefined"!=typeof module?n():"function"==typeof define&&define.amd?define(n):n()}(this,function(){"use strict";function r(r){var n=r,t=n.length>>1;if(4>t)return!0;for(var e=m(),u=m(),i=m(),o=m(),f=m(),x=0;t>x;x++){e.x=n[2*x],e.y=n[2*x+1],x==t-1?(u.x=n[0],u.y=n[1]):(u.x=n[2*x+2],u.y=n[2*x+3]);for(var a=0;t>a;a++)if(!(Math.abs(x-a)<2||a==t-1&&0==x||x==t-1&&0==a||(i.x=n[2*a],i.y=n[2*a+1],a==t-1?(o.x=n[0],o.y=n[1]):(o.x=n[2*a+2],o.y=n[2*a+3]),null==c(e,u,i,o,f))))return!1}return!0}function n(r){var n=r;if(n.length<6)return!0;for(var t=n.length-4,e=0;t>e;e+=2)if(!p(n[e],n[e+1],n[e+2],n[e+3],n[e+4],n[e+5]))return!1;return p(n[t],n[t+1],n[t+2],n[t+3],n[0],n[1])&&p(n[t+2],n[t+3],n[0],n[1],n[2],n[3])?!0:!1}function t(r){var n=r;if(n.length<6)return 0;for(var t=n.length-2,e=0,u=0;t>u;u+=2)e+=(n[u+2]-n[u])*(n[u+1]+n[u+3]);return e+=(n[0]-n[t])*(n[t+1]+n[1]),.5*-e}function e(r){for(var n=r,t=1/0,e=1/0,u=-t,i=-e,o=0;o<n.length;o+=2)t=Math.min(t,n[o]),u=Math.max(u,n[o]),e=Math.min(e,n[o+1]),i=Math.max(i,n[o+1]);return{x:t,y:e,width:u-t,height:i-e}}function u(r){var n=r,t=n.length>>1;if(3>t)return[];for(var e=[],u=[],i=0;t>i;i++)u.push(i);for(var i=0,o=t;o>3;){var f=u[(i+0)%o],x=u[(i+1)%o],a=u[(i+2)%o],l=n[2*f],y=n[2*f+1],s=n[2*x],v=n[2*x+1],d=n[2*a],c=n[2*a+1],g=!1;if(p(l,y,s,v,d,c)){g=!0;for(var m=0;o>m;m++){var M=u[m];if(M!=f&&M!=x&&M!=a&&h(n[2*M],n[2*M+1],l,y,s,v,d,c)){g=!1;break}}}if(g)e.push(f,x,a),u.splice((i+1)%o,1),o--,i=0;else if(i++>3*o)break}return e.push(u[0],u[1],u[2]),e}function i(r,n,t,e,u){var i=r,f=n,x=t,a=e,l=u;if(o(i,f,x)||o(i,a,l))return[i.slice(0)];for(var y=m(f,x),h=m(a,l),d=[],g=[],p=0;p<i.length;p+=2)g.push(m(i[p],i[p+1]));for(var p=0;p<g.length;p++){var b=m(0,0);b=c(y,h,g[p],g[(p+1)%g.length],b);var O=d[0],k=d[d.length-1];b&&(null==O||M(b,O)>1e-10)&&(null==k||M(b,k)>1e-10)&&(b.flag=!0,d.push(b),g.splice(p+1,0,b),p++)}if(d.length<2)return[i.slice(0)];var A=function(r,n){return M(y,r)-M(y,n)};d.sort(A);for(var C=[],S=0;d.length>0;){var q=d[0],B=d[1],G=g.indexOf(q),I=g.indexOf(B),P=!1;if(v(g,G)===I?P=!0:(q=d[1],B=d[0],G=g.indexOf(q),I=g.indexOf(B),v(g,G)===I&&(P=!0)),P){S--;var R=s(g,G,I);C.push(R),g=s(g,I,G),q.flag=B.flag=!1,d.splice(0,2),0==d.length&&C.push(g)}else S++,d.reverse();if(S>1)break}for(var j=[],p=0;p<C.length;p++){for(var w=C[p],E=[],T=0;T<w.length;T++)E.push(w[T].x,w[T].y);j.push(E)}return j}function o(r,n,t){for(var e,u=r,i=n,o=t,f=u.length>>1,x=u[2*f-3]-o,a=u[2*f-2]-i,l=u[2*f-1]-o,y=0;f>y;y++)if(e=a,x=l,a=u[2*y]-i,l=u[2*y+1]-o,x!==l)var s=l>x;for(var v=0,y=0;f>y;y++)if(e=a,x=l,a=u[2*y]-i,l=u[2*y+1]-o,!(0>x&&0>l||x>0&&l>0||0>e&&0>a)){if(x===l&&Math.min(e,a)<=0)return!0;if(x!==l){var h=e+(a-e)*-x/(l-x);if(0===h)return!0;h>0&&v++,0===x&&s&&l>x&&v--,0===x&&!s&&x>l&&v--,s=l>x}}return 1===(1&v)}function f(r,n,t,e,u,i){var o=r,f=n,x=t,a=e,l=u,s=o.length-2,v=b(),h=v[0],c=v[1],g=v[2],p=v[3],m=v[4];h.x=f,h.y=x,c.x=f+a,c.y=x+l,(null===i||void 0===i)&&(i={dist:0,edge:0,norm:{x:0,y:0},refl:{x:0,y:0}}),i.dist=1/0;for(var M,O=0;s>O;O+=2)g.x=o[O],g.y=o[O+1],p.x=o[O+2],p.y=o[O+3],M=d(h,c,g,p,m),M&&(i=y(a,l,h,g,p,m,O/2,i));return g.x=p.x,g.y=p.y,p.x=o[0],p.y=o[1],M=d(h,c,g,p,m),M&&(i=y(a,l,h,g,p,m,o.length/2-1,i)),i.dist!==1/0?i:null}function x(r,n,t,e){var u=r,i=u.length-2,o=b(),f=o[0],x=o[2],a=o[3];f.x=n,f.y=t,null==e&&(e={dist:0,edge:0,point:{x:0,y:0},norm:{x:0,y:0}}),e.dist=1/0;for(var y=0;i>y;y+=2)x.x=u[y],x.y=u[y+1],a.x=u[y+2],a.y=u[y+3],e=l(f,x,a,y>>1,e);x.x=a.x,x.y=a.y,a.x=u[0],a.y=u[1],e=l(f,x,a,i>>1,e);var s=1/e.dist;return e.norm.x=(n-e.point.x)*s,e.norm.y=(t-e.point.y)*s,e}function a(r){for(var n=r,t=[],e=n.length-2;e>=0;e-=2)t.push(n[e],n[e+1]);return t}function l(r,n,t,e,u){var i,o,f=r.x,x=r.y,a=n.x,l=n.y,y=t.x,s=t.y,v=f-a,h=x-l,d=y-a,c=s-l,g=v*d+h*c,p=d*d+c*c,m=g/p;0>m||a==y&&l==s?(i=a,o=l):m>1?(i=y,o=s):(i=a+m*d,o=l+m*c);var M=f-i,b=x-o,O=Math.sqrt(M*M+b*b);return O<u.dist&&(u.dist=O,u.edge=e,u.point.x=i,u.point.y=o),u}function y(r,n,t,e,u,i,o,f){var x=M(t,i);if(x<f.dist){var a=1/M(e,u),l=-(u.y-e.y)*a,y=(u.x-e.x)*a,s=2*(r*l+n*y);f.dist=x,f.norm.x=l,f.norm.y=y,f.refl.x=-s*l+r,f.refl.y=-s*y+n,f.edge=o}return f}function s(r,n,t){var e=r.length,u=[];n>t&&(t+=e);for(var i=n;t>=i;i++)u.push(r[i%e]);return u}function v(r,n){for(var t=r.length;;)if(n=(n+1)%t,r[n].flag)return n}function h(r,n,t,e,u,i,o,f){var x=o-t,a=f-e,l=u-t,y=i-e,s=r-t,v=n-e,h=x*x+a*a,d=x*l+a*y,c=x*s+a*v,g=l*l+y*y,p=l*s+y*v,m=1/(h*g-d*d),M=(g*c-d*p)*m,b=(h*p-d*c)*m;return M>=0&&b>=0&&1>M+b}function d(r,n,t,e,u){var i=r.x-n.x,o=t.x-e.x,f=r.y-n.y,x=t.y-e.y,a=i*x-f*o;if(0==a)return null;var l=r.x*n.y-r.y*n.x,y=t.x*e.y-t.y*e.x,s=u,v=1/a;return s.x=(l*o-i*y)*v,s.y=(l*x-f*y)*v,g(s,t,e)?f>0&&s.y>r.y||0>f&&s.y<r.y?null:i>0&&s.x>r.x||0>i&&s.x<r.x?null:s:null}function c(r,n,t,e,u){var i=r.x-n.x,o=t.x-e.x,f=r.y-n.y,x=t.y-e.y,a=i*x-f*o;if(0===a)return null;var l=r.x*n.y-r.y*n.x,y=t.x*e.y-t.y*e.x,s=u;return s.x=(l*o-i*y)/a,s.y=(l*x-f*y)/a,g(s,r,n)&&g(s,t,e)?s:null}function g(r,n,t){var e=Math.min(n.x,t.x),u=Math.max(n.x,t.x),i=Math.min(n.y,t.y),o=Math.max(n.y,t.y);return e===u?i<=r.y&&r.y<=o:i===o?e<=r.x&&r.x<=u:e<=r.x+1e-10&&r.x-1e-10<=u&&i<=r.y+1e-10&&r.y-1e-10<=o}function p(r,n,t,e,u,i){return(n-e)*(u-t)+(t-r)*(i-e)>=0}function m(r,n){return{x:r,y:n,flag:!1,toString:function(){return"Point ["+r+", "+n+"]"}}}function M(r,n){var t=n.x-r.x,e=n.y-r.y;return Math.sqrt(t*t+e*e)}function b(r){r=r||10;for(var n=[],t=0;r>t;t++)n.push(m(0,0));return n}module.exports.IsSimple=r,module.exports.IsConvex=n,module.exports.GetArea=t,module.exports.GetAABB=e,module.exports.Triangulate=u,module.exports.Slice=i,module.exports.ContainsPoint=o,module.exports.Raycast=f,module.exports.ClosestEdge=x,module.exports.Reverse=a});